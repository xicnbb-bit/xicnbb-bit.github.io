const Yagu=(()=>{const t=e=>{const s=document.getElementById("site-nav"),n=document.getElementById("nav-mask"),t=s.classList.toggle("open");e.setAttribute("aria-expanded",t?"true":"false"),n&&n.classList.toggle("show",t),document.body.style.overflow=t?"hidden":""},e=()=>{const t=document.getElementById("reading-progress");if(!t)return;const e=document.documentElement,n=e.scrollTop/(e.scrollHeight-e.clientHeight);t.style.width=`${Math.max(0,Math.min(1,n))*100}%`},n=e=>{const t=parseInt(e.dataset.n||"0",10)+1;e.dataset.n=t,e.textContent=`赞 · ${t}`},s=()=>{document.querySelectorAll(".carousel").forEach(e=>{let t=0;const n=e.querySelectorAll(".slide"),s=e=>{n.forEach((t,n)=>{t.style.display=n===e?"block":"none"})};s(0);let i=null;const a=e.dataset.auto==="true";a&&n.length>1&&(i=setInterval(()=>{t=(t+1)%n.length,s(t)},4e3));let o=0;e.addEventListener("touchstart",e=>{o=e.touches[0].clientX}),e.addEventListener("touchend",e=>{const i=e.changedTouches[0].clientX-o;(i<0?-i:i)>30&&(t=i<0?(t+1)%n.length:(t-1+n.length)%n.length,s(t))})})},o=()=>{document.addEventListener("scroll",e,{passive:!0}),e(),s(),document.addEventListener("click",e=>{const t=document.getElementById("site-nav"),n=document.querySelector(".hamburger"),s=document.getElementById("nav-mask");if(!t||!n)return;const i=t.classList.contains("open");if(!i)return;const o=e.target;if(t.contains(o)||n.contains(o))return;t.classList.remove("open"),n.setAttribute("aria-expanded","false"),s&&s.classList.remove("show"),document.body.style.overflow=""})};return{toggleNav:t,like:n,init:o}})();document.addEventListener("DOMContentLoaded",Yagu.init)